id: run_taxi_all_months
namespace: zoomcamp

tasks:
  - id: each_month
    type: io.kestra.core.tasks.flows.EachSequential
    value:
      - "01"
      - "02"
      - "03"
      - "04"
      - "05"
      - "06"
      - "07"
      - "08"
      - "09"
      - "10"
      - "11"
      - "12"

    tasks:
      - id: call_subflow
        type: io.kestra.core.tasks.flows.Subflow
        namespace: zoomcamp
        flowId: 04_postgres_taxi

        inputs:
          taxi: yellow
          year: "2020"
          month: "{{ taskrun.value }}"
